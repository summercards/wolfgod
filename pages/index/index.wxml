<view class="container">

<!-- ğŸ‘† æ§åˆ¶æŒ‰é’®æå‰æ”¾ç½® -->
<view class="controls">
  <button bindtap="startGame">å¼€å§‹æ¸¸æˆ</button>
  <button bindtap="enterNight">è¿›å…¥å¤œæ™š</button>
</view>

<!-- âœ… ç©å®¶ç»Ÿè®¡ä¿¡æ¯å±•ç¤º -->
<view class="role-stats">
  <text>å½“å‰å­˜æ´» | ç‹¼äºº: {{roleStats['ç‹¼äºº']}}  æ‘æ°‘: {{roleStats['æ‘æ°‘']}}  ç¥æ°‘: {{roleStats['ç¥æ°‘']}}</text>

</view>


<!-- ğŸ‘¥ ç©å®¶åŒº -->
<view class="players">
  <block wx:for="{{players}}" wx:key="index">
    <view class="player {{item.alive ? '' : 'dead'}} {{item.role === 'ç‹¼äºº' ? 'werewolf' : ''}} {{item.killedTonight ? 'killed' : ''}} {{item.role === 'é¢„è¨€å®¶' ? 'seer' : ''}} {{item.role === 'å¥³å·«' ? 'witch' : ''}} {{item.role === 'å®ˆå«' ? 'guard' : ''}} {{item.role === 'çŒäºº' ? 'hunter' : ''}} {{item.guarded ? 'guarded' : ''}} {{item.role === 'å®ˆå«' && phase === 'guard_protect' ? 'guardian-mark' : ''}} {{item.cured ? 'cured' : ''}}"
          bindtap="onSelectPlayer" data-index="{{index}}">

      <view class="verify-tag" wx:if="{{item.verifyResult}}">{{item.verifyResult}}</view>
      <view class="ability-tag" wx:if="{{item.role === 'å¥³å·«'}}">
        <text>è§£è¯</text> <text>æ¯’è¯</text>
      </view>

      <block wx:if="{{item.role}}">
        <text>{{item.number}}-{{item.role}}</text>
      </block>
      <block wx:else>
        <text>{{item.number}}</text>
      </block>
    </view>
  </block>
</view>

<!-- ğŸ“œ æ—¥å¿—è®°å½• -->
<scroll-view class="log" scroll-y="true" scroll-with-animation="true" scroll-into-view="{{logAnchor}}">
  <block wx:for="{{logs}}" wx:key="index">
    <view>{{item}}</view>
  </block>
  <view id="log-bottom"></view>
</scroll-view>

<!-- â­ï¸ å¥³å·«è·³è¿‡ -->
<view wx:if="{{subPhase === 'witch_cure'}}" class="skip-cure">
  <button bindtap="skipCure">è·³è¿‡ä½¿ç”¨è§£è¯</button>
</view>

<!-- ğŸ” æ§åˆ¶æµç¨‹ -->
<view class="flow-control" wx:if="{{subPhase !== 'witch_cure'}}">
  <button bindtap="handleFlowAction">{{flowButtonText}}</button>
</view>

</view>
